<app-header></app-header>
<app-nav></app-nav>



<main id="main" class="main">

  <section>
    <div class="espaco"></div>
    <form class="row g-12 needs-validation">

      <div class="col-md-6">
        <label for="floatingSelect">Usuários</label>
        <ng-multiselect-dropdown id="comboUsuarios" [placeholder]="'Selecione'" [settings]="dropdownSettingsUsuarios"
          [data]="listaUsuarios" [(ngModel)]="selectedItemsUsuarios" (onSelect)="selecionarUsuario($event)"
          [(ngModel)]="selectedItemsUsuarios" [ngModelOptions]="{standalone: true}">
        </ng-multiselect-dropdown>
      </div>

      <div class="col-md-6">
        <label for="floatingSelect">Classes</label>
        <ng-multiselect-dropdown id="comboClasses" [placeholder]="'Selecione'" [settings]="dropdownSettingsClasses"
          [data]="listaClasses" (onSelect)="selecionarClasse($event)" [(ngModel)]="selectedItemsClasses"
          [ngModelOptions]="{standalone: true}">
        </ng-multiselect-dropdown>
      </div>

      <div class="espaco"></div>

      <div class="col-md-4">
        <label for="floatingSelect">Raças</label>
        <ng-multiselect-dropdown id="comboRacas" [placeholder]="'Selecione'" [settings]="dropdownSettingsRacas"
          [data]="listaRacas" (onSelect)="selecionarRaca($event)" [(ngModel)]="selectedItemsRacas"
          [ngModelOptions]="{standalone: true}">
        </ng-multiselect-dropdown>
      </div>

      <div class="col-md-4">
        <label for="floatingSelect">Tendências</label>
        <ng-multiselect-dropdown id="comboTendencias" [placeholder]="'Selecione'"
          [settings]="dropdownSettingsTendencias" [data]="listaTendencias" (onSelect)="selecionarTendencia($event)"
          [(ngModel)]="selectedItemsTendencias" [ngModelOptions]="{standalone: true}">
        </ng-multiselect-dropdown>
      </div>

      <div class="col-md-4">
        <label for="floatingSelect">Sexos</label>
        <ng-multiselect-dropdown id="comboSexos" [placeholder]="'Selecione'" [settings]="dropdownSettingsSexos"
          [data]="listaSexos" (onSelect)="selecionarSexo($event)" [(ngModel)]="selectedItemsSexos"
          [ngModelOptions]="{standalone: true}">
        </ng-multiselect-dropdown>
      </div>

    </form>

    <div class="col-md-3 mt" style="white-space: nowrap;">
      <label for="floatingSelect">&nbsp;&nbsp;</label>
      <div class="mb-3">
        <button type="button" id="botaoFiltrar" (click)="executarPesquisaByFiltro()" class="btn btn-primary"><i
            class="bi bi-search"></i>&nbsp;Filtrar</button>

        <label for="floatingSelect">&nbsp;&nbsp;</label>
        <button type="button" id="botaoLimpar" class="btn btn-secondary" (click)="limparFiltros()"><i
            class="bi bi-brush"></i>&nbsp;Limpar</button>
      </div>
    </div>

    <div class="espacoGrande"></div>


    <table class="table table-bordered" id="excel-table">
      <thead>
        <tr>
          <th scope="col" style="text-align: center">Nome</th>
          <th scope="col" style="text-align: center">Classe</th>
          <th scope="col" style="text-align: center">Raça</th>
          <th scope="col" style="text-align: center">Fortitude</th>
          <th scope="col" style="text-align: center">Reflexo</th>
          <th scope="col" style="text-align: center">Vontade</th>
          <th scope="col" style="text-align: center">Nível</th>
          <th scope="col" style="text-align: center">Vida atual</th>
          <th scope="col" style="text-align: center">% vida atual</th>
          <th scope="col" style="text-align: center">Ações</th>
        </tr>
      </thead>
      <tbody>
        <tr
          *ngFor="let personagem of listaPersonagens  | paginate: {itemsPerPage: 10, currentPage: paginaInicial, id:'2' }; let i = index">
          <td style="text-align: center">{{personagem.nome}}</td>
          <td style="text-align: center">{{personagem.descricaoClasse}}</td>
          <td style="text-align: center">{{personagem.descricaoRaca}}</td>
          <td style="text-align: center">{{personagem.fortitude}}</td>
          <td style="text-align: center">{{personagem.reflexo}}</td>
          <td style="text-align: center">{{personagem.vontade}}</td>
          <td style="text-align: center">{{personagem.nivel}}</td>
          <td style="text-align: center">{{personagem.vidaAtual}}</td>
          <td style="text-align: center"
            [ngStyle]="{'color': (personagem.vidaTotal ? personagem.vidaAtual / personagem.vidaTotal * 100 : personagem.vidaAtual / 1) > 50 ? 'green' : 'red'}">
            {{(personagem.vidaTotal ? personagem.vidaAtual / personagem.vidaTotal * 100 : personagem.vidaAtual /
            1) | number: '1.2-2' }} %
          </td>

          <td
            style="min-width: 100px !important; max-width: 100px !important; text-align: center; white-space: nowrap; cursor: pointer;">

            <a title="Editar" (click)="editarPersonagem(personagem.id)">
              <i class="bi bi-pencil-fill" style="font-size: 25px; margin-right: 15px"></i>
            </a>

            <a title="Excluir" (click)="excluirPersonagem(personagem.id)">
              <i class="bi bi-trash-fill" style="font-size: 25px; margin-right: 15px"></i>
            </a>

            <a title="Upar" (click)="uparNivel(personagem.id)">
              <i class="bi bi-arrow-up-circle-fill" style="font-size: 25px; margin-right: 15px"></i>
            </a>

            <a title="Baixar ficha" (click)="baixarFicha(personagem.id)">
              <i class="bi bi-cloud-arrow-down-fill" style="font-size: 25px;"></i>
            </a>
          </td>

        </tr>
      </tbody>
    </table>
    <pagination-controls (pageChange)="paginaInicial = $event" previousLabel="Anterior" nextLabel="Próxima" id="2">
    </pagination-controls>

  </section>


</main>



<!--Modal novo/editar agrupador INICIO-->
<div class="modal fade modalCriarFundo" id="modalNovoEditarAgrupador" data-bs-backdrop="static" data-bs-keyboard="false"
    tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="card-title">agrupador</h5>
                <a type="button" class="btn-close" data-bs-dismiss="modal" (click)="teste()"
                    aria-label="Close"></a>
            </div>
            <div class="modal-body">

                <div class="espaco"></div>
                <!--Corpo do elemento de estimativa INICIO-->
                <div class="elemento">
                    <div class="row align-items-start">
                        <div class="col" style="min-width: 250px; max-width: 1250px;">
                            <label>Descrição
                            </label>
                            <input type="text" class="form-control" [(ngModel)]="teste"
                                id="exampleInputEmail1" aria-describedby="emailHelp" #descEditNov="ngModel" required>
                        </div>

                    </div>
                    <div class="row align-items-center">

                    </div>
                    <div class="row align-items-end">

                    </div>
                </div>
                <!--Corpo do elemento de estimativa FIM-->

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" (click)="teste()"
                    data-bs-dismiss="modal">Cancelar</button>
                <div>
                    <button type="submit" titile="Notificar cliente" class="btn btn-success"
                        (click)="teste()" >Criar</button>
                </div>
                <div>
                    <button type="submit" titile="Notificar cliente" class="btn btn-success"
                        (click)="teste()">Editar</button>
                </div>
            </div>
        </div>
    </div>
</div>
<!--Modal novo/editar agrupador FIM-->